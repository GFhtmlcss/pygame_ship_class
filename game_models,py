import pygame
import game_ship

# ship - корабль и огонь
class Ship(pygame.sprite.Sprite):
    global window_width
    global window_height
    global ship_check
    global now
    global now_green

    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        self.image = pygame.transform.scale(pygame.image.load('image/ship.png'), (250, 250))
        self.image.set_colorkey('WHITE')
        self.rect = self.image.get_rect()
        self.rect.x = window_width / 2 - 180
        self.rect.y = window_height - window_height / 2
        self.speed = 5

        self.last = pygame.time.get_ticks()
        self.last_green = pygame.time.get_ticks()
        self.cooldown = 500
        self.green_cooldown = self.cooldown / 4

    def check(self):
        if ship_check:
            pygame.sprite.Sprite.__init__(self)
            self.image = pygame.transform.scale(pygame.image.load('image/ship.png'), (250, 250))
            self.image.set_colorkey('WHITE')
        else:
            pygame.sprite.Sprite.__init__(self)
            self.image = pygame.transform.scale(pygame.image.load('image/boom.png'), (250, 250))
            self.image.set_colorkey('WHITE')

    # def fire(self):
    #     if now - self.last >= self.cooldown:
    #         self.last = now
    #         bullet = Gun()
    #         bullets.add(bullet)
    #     if now_green - self.last_green >= self.green_cooldown:
    #         bullet_green = GreenGun()
    #         bullets_green.add(bullet_green)
    #         self.last_green = now_green
    #
    #         bullet_green_2 = GreenGun()
    #         bullet_green_2.rect.x += 195
    #         bullets_green.add(bullet_green_2)

    def update(self):
        keys = pygame.key.get_pressed()
        if ship_check:
            if keys[pygame.K_a]:
                if self.rect.x > 0 and ship_check == True:
                    self.rect.x -= self.speed
            elif keys[pygame.K_d]:
                if self.rect.x < window_width - 250 and ship_check == True:
                    self.rect.x += self.speed
            if keys[pygame.K_w]:
                if self.rect.y > -10 and ship_check == True:
                    self.rect.y -= self.speed
            elif keys[pygame.K_s]:
                if self.rect.y < window_height - 250 and ship_check == True:
                    self.rect.y += self.speed
